\documentclass{article}

% Language setting
% Replace `english' with e.g. `spanish' to change the document language
\usepackage[spanish]{babel}

% Set page size and margins
% Replace `letterpaper' with `a4paper' for UK/EU standard size
\usepackage[letterpaper,top=2cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}
\usepackage{titlesec}

% Useful packages
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, arrows}

% we want ER + above/below + left/right
\usetikzlibrary{er,positioning}
\tikzstyle{startstop} = [rectangle, minimum width=3cm, minimum height=1cm,text
centered, draw=black, fill=blue!15]
\tikzstyle{arrow} = [thick]

\title{Resumen de Diseño de Bases de Datos}
\author{You}

\begin{document}
\maketitle

\include{Unidades/Unidad01}

\section{Unidad 2 - Teoría y Diseño de Bases de Datos Relacionales}

  \subsection{Formas Normales}
  Una Forma Normal es una restricción sobre un esquema de Base de Datos relacionales con dependencias funcionales que previene ciertas
  propiedades indeseables. Cumplir ciertas formas normales garantiza buenos diseños de bases de datos. El propósito de las formas normales
  es evitar redundancia y eliminar inconsistencias y anomalías de inserción y borrado.

  \subsubsection{Dependencias Funcionales}
  Una dependencia funcional es una restricción de valor único que se aplica sobre dos conjuntos de atributos X e Y de un esquema de relación
  de una base de datos. Constituye entonces una generalización del concepto de clave. Nos permite expresar hechos sobre el dominio que
  estamos modelando con nuestra base de datos. Esta restricción especifica que el valor del o los atributos en X determinan un único valor
  de los atributos en Y en todos los estados de la relación. Estás dependencias las utilizamos para normalizar los esquemas de relaciones de
  una base de datos.

  \subsubsection{Primera Forma Normal - 1FN}
  Un esquema de relación R está en 1FN si los valores del dominio de A son atómicos, siendo A cada uno de los atributos A en R, es decir las
  valores de los atributos no son listas, cojuntos de valores o valores compuestos. La 1FN establece que los dominios de los atributos deben
  incluir solo valores atómicos (simples, indivisibles) y prohíbe entonces las “relaciones dentro de relaciones” o las “relaciones como
  atributos de tuplas”. \\ \\
  Ventajas de la 1FN
  \begin{itemize}
      \item Representación Tabular
      \item Lenguajes de Consulta más simples
      \item Definición de restricciones más simples
  \end{itemize}
  Desventajas de la 1FN

  \begin{itemize}
      \item Inconsistencia.
      \item Redundancia.
      \item Anomalías de inserción y de borrado.
  \end{itemize}
  Ejemplo de un esquema de relación en 1FN: \\
  \begin{table}[h]
    \begin{tabular}{| l | l | l | l | l| l|}
    \hline
    Id\_empleado & Dni & Nombre & Apellido & Id\_proyecto & Descripción\_proyecto\\ \hline
    1 & 45789777 & Martin & Perez & A1 & Proyecto sobre microprocesadores\\ \hline
    2 & 45789777 & Lucas & Martinez & A1 & Proyecto sobre programación\\ \hline
    3 & 33765922 & María & García & A2 & Proyecto sobre compiladores\\ \hline
    4 & 33765922 & Alejandra & Carrizo & A2 & Proyecto sobre compiladores\\ \hline
    5 & 33444222 & Berta & Gonzalez & A3 & Proyecto sobre compiladores\\ \hline
    \end{tabular}
  \end{table}

  \begin{itemize}
      \item Inconsistencia: En este ejemplo podemos ver inconsistencia en los datos ya que en la tupla con id\_empleado 1 y 2 podemos ver el mismo proyecto pero con distintas descripciones.
      \item Redundancia: Si vemos las tuplas  3 y 4 vemos que se repite información en este caso la descripción del proyecto.
      \item Anomalía de Inserción: Si insertamos una tupla con id\_proyecto A2 con descripción distinta a la de las tuplas ya existentes no podemos saber cual es la descripción correcta del proyecto A2.
      \item Anomalía de Borrado: Si borramos la tupla con id\_proyecto a3 perdemos la información tanto del proyecto como de la persona.
  \end{itemize}

\subsection{Segunda forma normal - 2FN}
Un esquema de relación R está en 2FN si está en 1FN y para cada atributo no primo en R tiene una dependencia funcional total con alguna clave de R.

Es decir cada atributo no primo es irreduciblemente dependiente de una clave primaria.


\begin{table}[h]
    \centering
    \begin{tabular}{cccc}
        Torneo & Año & Ganador & Fecha de nacimiento del ganador\\
        Des Moines Masters & 1998 & Chip Masterson & 14 de marzo de 1977\\
        Indiana Invitational & 1998 & Al Fredickson & 21 de julio de 1975\\
        Cleveland Open & 1999 & Bob Albertson & 28 de septiembre de 1968\\
        Des Moines Masters & 1999 & Al Fredrickson & 21 de julio de 1975\\
        Indiana Invitational & 1999 & Chip Masterson & 14 de marzo de 1977\\
    \end{tabular}
    \caption{Caption}
    \label{tab:my_label}
\end{table}

\vspace{1cm}
Esta relación está en 2FN pero presenta anomalía de actualización por ejemplo modificar la fecha de nacimiento provocaría que el mismo ganador tuviera dos fechas de nacimiento distintas.

\subsection{Tercera forma normal - 3FN}
Un esquema de relación R está en 3FN con respecto a un conjunto de dependencias funcionales F si está en 2FN y cada atributo no primo no es transitivamente dependiente de una clave.

Segunda definición
Un esquema de relación R está en 3FN con respecto a un conjunto de dependencias funcionales F si para cada dependencia funcional X -> A en F con A no perteneciente a X se verifica que: 
\begin{itemize}
    \item X es superclave o
    \item A es primo
\end{itemize}

\section{Unidad 3 - Modelo Relacional}

\subsection{Dependencias Funcionales}
Existe una teoría de diseño para las relaciones que nos permite examinar un diseño cuidadosamente y realizar mejoras basándonos un unos pocos principios.
La teoría comienza haciéndonos establecer las restricciones que se aplican a la relación. La restricción más común es la dependencia funcional es una declaración de un tipo que generaliza la idea de una clave para la relación.
En la teoria del diseño de bases de datos relacionales existe un concepto llamado dependencias funcionales el cual es una declaración de tipo que generaliza la idea de una clave para una relación.
Una Dependencia funcional sobre una relación R es una proposición de la forma:
Si dos tuplas de r coinciden en las atributos A1, A2, ... , An entonces también coincidirán en otro atributo B.
A1, A2, ... , An => B es decir decimos que A1, A2, ... An determinan funcionalmente a B
Es decir las tuplas poseen los mismos valores en sus componentes respectivas para cada uno de esos atributos entonces también coincidirán en otro atributo B.

\subsection{Restricciones de Integridad Referencial}
Antes de definir que es una restricción de integridad referencial debemos definir el concepto de clave primaria y clave foránea.
Una clave primaria es un atributo el cual nos permite identificar unívocamente a una entidad y por lo tanto identificar unívocamente a cada tupla de esa entidad. Ahora podemos definir que es una clave foránea. Una clave foránea es un atributo que es clave primaria de otra relación.
Las restricciones de integridad referencial son especificadas entre dos relaciones y se utilizan para mantener la consistencia entre las tuplas en ambas relaciones. Es decir una tupla de una relación A que hace referencia a una tupla de otra relación B debe referir a una tupla existente de esa relación B.
Con esto logramos que nuestra base de datos se mantenga en un estado consistente.

Sobre la clave foránea se definen un conjunto de reglas que son:
\begin{itemize}
\item Regla de nulos - inserción?: Establece si es posible colocar nulos en las claves foráneas.
\item Regla de Borrado: Establece restricciones al momento de eliminar una tupla en la base de datos.
\item Regla de actualización: Establece restricciones al momento de actualizar una tupla de la base de datos.
\end{itemize}
Reglas de actualización: Si se intenta actualizar el id de una tupla y a su vez dicho id es clave foranea en otra relación de la base de datos se aplican las siguientes reglas: 
\begin{itemize}
\item Restringir: Cuando se actualiza una clave primaria en una relación y dicha clave es clave foranea en otras relaciónes esta regla evita dicha modificación.
\item Propagar: Cuando se actualiza la clave primaria de una tupla y dicha clave es clave foranea en otras relaciones esta regla actualiza la clave foranea en todas las tuplas que la utilicen.
\item Colocar Nulos: Al actualizar el id de una tupla en una base de datos si dicho id es clave foranea en otra relación esta regla setea dichas claves en null.
\end{itemize}
Reglas de Borrado: Si se intenta borrar una tupla de la cual su id es clave foranea en alguna otra relación en la base de datos. Las reglas actuan de la siguiente manera:
\begin{itemize}
    \item Restringir: Esta regla restringe ese comportamiento y no lo permite.
    \item Propagar: Esta reglar borra la tupla seleccionada y luego borra todas las tuplas en la base de datos que tenga como clave foranea el id de la tupla borrada.
    \item Colocar nulos: Al borrar una tupla en una entidad esta regla reemplaza el id de la tupla eliminada en las relaciones que tienen dicho id como clave foranea por el valor null.
\end{itemize}

\subsection{Algebra relacional y calculo de dominios}
El algebra relacional es el conjunto basico de operaciones para el modelo relacional. Estas operaciones permiten al usuario construir consultas como expresiones de algebra relacional. El algebra relacional es muy importante por varias razones.
\begin{itemize}
    \item Provee los fundamentos formales prar las operaciones del modelo relacional.
    \item Se utiliza como base para la implementación y optimización de consultas en el proceso de consulta y son una parte integrl en los modulos de optimización en las los sistemas gestores de bases de datos relacionales.
    \item Algunos de sus conceptos son incorporados dentro de lenguaje de consulta SQL standard.
\end{itemize}
El cálculo relacional provee un lenguaje declarativo de alto nivel para especificar consultas relacionales.
\vspace{2em}
\begin{center}
   \begin{tikzpicture}[node distance=2cm]
        \node (empleado) [startstop] {Empleado};
        \node (departamento) [startstop, below of= empleado] {Departamento};
        \draw [arrow] (empleado) -- (departamento);
    \end{tikzpicture} 
\end{center}

\end{document}
